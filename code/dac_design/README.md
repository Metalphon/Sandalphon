# DAC 正弦波生成器项目

## 项目概述

这个项目实现了一个基于FPGA的数字正弦波发生器，通过I2C总线控制DAC芯片输出模拟正弦波。项目使用Verilog HDL编写，适用于各种FPGA平台。

## 功能特点

- 使用查找表方法生成高精度正弦波
- 通过I2C总线控制外部DAC芯片
- 支持频率调整
- 纯硬件实现，无需处理器参与
- 适用于PCF8591等通用I2C接口DAC芯片

## 项目结构

```
.
├── rtl/                    # RTL设计文件
│   ├── top/                # 顶层模块
│   │   └── origin.v        # 系统顶层文件
│   ├── waveform/           # 波形生成模块
│   │   └── sine_wave_gen.v # 正弦波生成器
│   └── iic/                # I2C通信模块
│       └── DAC_I2C.v       # DAC控制模块
├── sim/                    # 仿真文件
│   ├── testbench/          # 测试台
│   │   └── tb_origin.v     # 顶层测试台
│   └── modelsim/           # ModelSim仿真工作目录
├── constraint/             # 约束文件
├── doc/                    # 文档
└── README.md               # 本文档
```

## 硬件连接

### I2C接口

- SCL: 连接到DAC的SCL引脚
- SDA: 连接到DAC的SDA引脚

### DAC芯片

该设计目前配置为使用PCF8591 DAC芯片，地址配置为0x90（写地址）。

## 参数设置

在`origin.v`文件中可以调整以下参数：

- `SINE_FREQ_VAL`: 控制正弦波频率，值越大频率越高
- `CNT_NUM`: 控制I2C时钟频率，默认配置为50MHz系统时钟下产生200kHz I2C时钟

## 波形说明

正弦波发生器通过256点查找表生成一个完整周期的正弦波，输出值范围为0-255。

## 使用方法

1. 将项目文件导入Quartus或其他FPGA开发环境
2. 根据需要调整参数
3. 综合并生成比特流文件
4. 将比特流文件下载到FPGA开发板
5. 连接DAC芯片到FPGA的I2C接口
6. 观察DAC输出的模拟正弦波

## 仿真方法

使用ModelSim或其他仿真工具执行以下步骤：

1. 编译所有设计文件和测试台
2. 运行`tb_origin`测试台
3. 观察I2C总线活动和生成的正弦波

## 注意事项

- 确保连接外部上拉电阻到SCL和SDA线（典型值：4.7kΩ）
- 确保DAC芯片地址配置与代码中设置一致
- 系统时钟频率默认为50MHz，如使用不同频率需相应调整`CNT_NUM`参数

## 扩展功能

该设计可以轻松扩展以支持更多功能：
- 添加其他波形类型（方波、三角波等）
- 通过串口或其他接口实现动态波形和参数控制
- 添加多通道输出支持

## 授权信息

该项目遵循MIT许可证开源。 